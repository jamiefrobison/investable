Investable
===============

    >>> import server
    >>> import unittest
    >>> from server import app
    >>> from model import *
    >>> client = app.test_client()

    >>> from datetime import datetime
    >>> from geoalchemy2 import Geometry


We'll use a temporary database in our tests::

    >>> connect_to_db_flask(app, 'postgresql:///testdb')

We'll put some sample data into it::

    >>> db.create_all()
    >>> sample_data()


Let's make sure you can find a user::

    >>> glinda = User.query.filter(User.firstname == 'glinda').first()
    >>> glinda.firstname
    u'glinda'
    >>> glinda.email
    u'glindagood@example.com'


Let's test our listings::

    >>> listing = Listing.query.get(38478998)
    >>> listing.zpid
    38478998
    >>> listing.hoa
    350
    >>> listing.price
    980430


Let's test the unit details for the listing above

    >>> listing.unitdetails.bedrooms
    2.0
    >>> listing.unitdetails.sqft
    1190
    >>> listing.unitdetails.latitude
    37.7872375


Let's test the rentals:

    >>> rental = Rental.query.filter(Rental.cl_id == '6007117642').first()
    >>> rental.price
    1885


Clear db after each test run:

    >>> db.session.close()
    >>> db.drop_all()

